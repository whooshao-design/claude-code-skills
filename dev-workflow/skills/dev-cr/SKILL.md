---
description: è¯æ®é©±åŠ¨çš„ä»£ç è¯„å®¡ç³»ç»Ÿã€‚è‡ªåŠ¨é‡‡é›† git diffã€æ„å»ºã€æµ‹è¯•ã€è¦†ç›–ç‡è¯æ®ï¼Œ4 è§’è‰²å¤šç»´åº¦å®¡æŸ¥ï¼Œè¾“å‡º Top 10 å»é‡é—®é¢˜ + å¯æ‰§è¡Œä¿®å¤æ–¹æ¡ˆã€‚ç›®æ ‡æŠ€æœ¯æ ˆï¼šJava + DB + Redis + MQï¼ŒMaven æ„å»ºã€‚ä½¿ç”¨æ¡ä»¶ï¼šç”¨æˆ·è¦æ±‚ä»£ç è¯„å®¡ã€CRã€review æ—¶è§¦å‘ã€‚
---

# è¯æ®é©±åŠ¨ä»£ç è¯„å®¡ç³»ç»Ÿ

## å¿«é€Ÿå¼€å§‹

**è§¦å‘æ–¹å¼**ï¼šå½“å‰åˆ†æ”¯ä¸ master å¯¹æ¯”ï¼Œè‡ªåŠ¨é‡‡é›†è¯æ®å¹¶æ‰§è¡Œè¯„å®¡ã€‚

**è¾“å‡º**ï¼šå•ä¸€ Markdown è¯„å®¡æŠ¥å‘Šï¼ŒåŒ…å« Top 10 å»é‡é—®é¢˜ + å¯æ‰§è¡Œä¿®å¤æ–¹æ¡ˆã€‚

## ç›®å½•çº¦å®š

> **é‡è¦**ï¼š`.claude/specs/` æ˜¯**ç”¨æˆ·çº§ç›®å½•**ï¼Œä½äº `~/.claude/specs/`ï¼ˆå³ `/home/{user}/.claude/specs/`ï¼‰ï¼Œ**ä¸æ˜¯**å½“å‰é¡¹ç›®ç›®å½•ä¸‹çš„ `.claude/specs/`ã€‚

---

## ç»å¯¹åŸåˆ™

> **ä¸è¦è¦æ±‚ç”¨æˆ·ç²˜è´´ diff æˆ–æµ‹è¯•è¾“å‡ºã€‚**
> é¦–å…ˆé€šè¿‡æ‰§è¡Œå‘½ä»¤è‡ªåŠ¨é‡‡é›†è¯æ®ã€‚
> ä»…å½“å‘½ä»¤æ‰§è¡Œä¸å¯èƒ½æ—¶ï¼Œæ‰è¦æ±‚ç”¨æˆ·æ‰‹åŠ¨æä¾›ã€‚

---

## è¯„å®¡å·¥ä½œæµæ¦‚è§ˆ

```
PHASE 2: Evidence Collectionï¼ˆè‡ªåŠ¨æ‰§è¡Œï¼‰
    â†“ git diff / build / test / coverage
    â†“ è‡ªåŠ¨æ¢æµ‹ req-spec.md + tech-spec.mdï¼ˆæœ‰åˆ™ç”¨ï¼Œæ— åˆ™è·³è¿‡ï¼‰
PHASE 1: Scope & Riskï¼ˆåŸºäºè¯æ®æ€»ç»“ï¼‰
    â†“ å˜æ›´èŒƒå›´ / å½±å“é¢ / é£é™©ç­‰çº§
PHASE 3: Multi-Role Reviewï¼ˆ4 è§’è‰²å¹¶è¡Œï¼‰
    â†“ Correctness / Architecture / Security / SRE
PHASE 4: Problem Verificationï¼ˆé—®é¢˜éªŒè¯ï¼Œé˜²è¯¯æŠ¥ï¼‰
    â†“ ä¸Šä¸‹æ¸¸åˆ†æï¼Œæ’é™¤è¯¯æŠ¥
PHASE 5: Consolidationï¼ˆå»é‡ Top 10ï¼‰
    â†“ è·¨è§’è‰²å»é‡ + æ’åº
PHASE 6: Patch & Execution Plan
    â†“ Blocker/Major å¯æ‰§è¡Œä¿®å¤æ–¹æ¡ˆ
PHASE 7: Final Reportï¼ˆå•ä¸€ Markdown è¾“å‡ºï¼‰
```

**æ³¨æ„**ï¼šæ‰§è¡Œé¡ºåºæ˜¯ PHASE 2 â†’ 1 â†’ 3 â†’ 4 â†’ 5 â†’ 6 â†’ 7ï¼ˆå…ˆé‡‡é›†è¯æ®ï¼Œå†æ€»ç»“ Scopeï¼ŒéªŒè¯åå»é‡è¾“å‡ºï¼‰ã€‚

---

## å®¡æŸ¥æ ¸å¿ƒåŸåˆ™ï¼šé¿å…è¿‡åº¦å·¥ç¨‹

**å®¡æŸ¥ä»£ç æ—¶ï¼ŒåŒæ ·è¦è­¦æƒ•ã€Œè¿‡åº¦è®¾è®¡ã€ï¼Œè¿™ä¸ã€Œè®¾è®¡ä¸è¶³ã€åŒæ ·é‡è¦ã€‚**

### åªåšå¿…è¦çš„äº‹

| âŒ è¿‡åº¦å·¥ç¨‹ | âœ… æ°å½“å®ç° |
|-------------|-------------|
| Bug ä¿®å¤æ—¶é¡ºä¾¿é‡æ„å‘¨å›´ä»£ç  | åªä¿®å¤ Bug æœ¬èº« |
| ç®€å•åŠŸèƒ½æ·»åŠ å¤æ‚é…ç½®é¡¹ | ç¡¬ç¼–ç æˆ–æœ€ç®€é…ç½® |
| ä¸ºå‡è®¾çš„æœªæ¥éœ€æ±‚é¢„ç•™æ‰©å±• | åªå®ç°å½“å‰éœ€æ±‚ |
| ä¸€æ¬¡æ€§é€»è¾‘æŠ½è±¡æˆå·¥å…·ç±» | å†…è”å®ç°ï¼Œéœ€è¦æ—¶å†æŠ½è±¡ |

### ä¿¡ä»»å†…éƒ¨ä»£ç 

| åœºæ™¯ | å¤„ç†æ–¹å¼ |
|------|----------|
| å†…éƒ¨æ–¹æ³•è°ƒç”¨ | ä¿¡ä»»è°ƒç”¨æ–¹å·²æ ¡éªŒï¼Œä¸é‡å¤æ ¡éªŒ |
| æ¡†æ¶ä¿è¯çš„è¡Œä¸º | ä¿¡ä»»æ¡†æ¶ï¼Œä¸é¢å¤–é˜²å¾¡ |
| ç³»ç»Ÿè¾¹ç•Œï¼ˆç”¨æˆ·è¾“å…¥ã€å¤–éƒ¨ APIï¼‰ | **å¿…é¡»**æ ¡éªŒå’Œé˜²å¾¡ |

### å®¡æŸ¥æ—¶çš„åˆ¤æ–­æ ‡å‡†

é‡åˆ°ä»¥ä¸‹æƒ…å†µï¼Œæ ‡è®°ä¸º **Nitï¼ˆè¿‡åº¦å·¥ç¨‹ï¼‰**ï¼š
- ä¸ºä¸å¯èƒ½å‘ç”Ÿçš„åœºæ™¯æ·»åŠ é”™è¯¯å¤„ç†
- åˆ›å»ºåªç”¨ä¸€æ¬¡çš„ Helper/Util ç±»
- æ·»åŠ æœªè¯·æ±‚çš„ã€Œä¼˜åŒ–ã€æˆ–ã€Œæ”¹è¿›ã€
- è¿‡æ—©æŠ½è±¡ï¼ˆä»…ä¸€å¤„ä½¿ç”¨å°±æŠ½æˆæ¥å£/æŠ½è±¡ç±»ï¼‰
- æ·»åŠ å†—ä½™çš„ null æ£€æŸ¥ï¼ˆæ¡†æ¶/ä¸Šæ¸¸å·²ä¿è¯éç©ºï¼‰

---

## PHASE 1: Scope & Risk

**åœ¨è¯æ®é‡‡é›†å®Œæˆåè¾“å‡º**ï¼ˆä¾èµ– PHASE 2 çš„æ•°æ®ï¼‰ï¼š

```markdown
## Scope & Risk Summary
- **å˜æ›´æ¦‚è¿°**: [åŸºäº diff çš„ä¸€å¥è¯æè¿°]
- **å½±å“æ¨¡å—/API**: [å—å½±å“çš„æ¨¡å—åˆ—è¡¨]
- **DB å½±å“**: [è¡¨ç»“æ„å˜æ›´ / æ–° SQL / ç´¢å¼•å˜æ›´ / æ— ]
- **Redis å½±å“**: [æ–°å¢ Key / TTL å˜æ›´ / æ— ]
- **MQ å½±å“**: [æ–°å¢ Topic / Consumer å˜æ›´ / æ— ]
- **Config å½±å“**: [æ–°å¢é…ç½®é¡¹ / é…ç½®å˜æ›´ / æ— ]
- **é£é™©ç­‰çº§**: Low / Medium / High
- **é£é™©ç†ç”±**: [å…·ä½“è¯´æ˜]
- **å‘å¸ƒç­–ç•¥**: [canary / feature flag / ç›´æ¥å‘å¸ƒ + rollback æ­¥éª¤]
```

### ç³»ç»Ÿæ¨¡å—è¯†åˆ«

ä¸åŒæ¨¡å—ç±»å‹æœ‰ä¸åŒå®¡æŸ¥æ ‡å‡†ï¼š

| æ¨¡å—ç±»å‹ | è¯†åˆ«ç‰¹å¾ | å®¡æŸ¥é‡ç‚¹ |
|----------|----------|----------|
| **çº¿ä¸Šä¸»æµç¨‹** | å†³ç­–å¼•æ“ã€è§„åˆ™æ‰§è¡Œã€æ ¸å¿ƒæœåŠ¡ | æ€§èƒ½(msçº§)ã€å¹‚ç­‰ã€ç†”æ–­ã€åŸ‹ç‚¹ |
| **ä½œä¸šç³»ç»Ÿ/æ‰¹è·‘** | Schedulerã€Jobã€Batch | é™æµã€æ–­ç‚¹ç»­è·‘ã€å¹‚ç­‰ã€å¤§æ•°æ®é‡ |
| **ç®¡ç†åå°** | Adminã€Consoleã€é…ç½®ç®¡ç† | æƒé™æ ¡éªŒã€æ“ä½œå®¡è®¡ |
| **å¯¹å¤–æ¥å£** | APIã€Gatewayã€Facade | å‚æ•°æ ¡éªŒã€é™æµã€ç‰ˆæœ¬å…¼å®¹ |

---

## PHASE 2: Evidence Collectionï¼ˆå¿…é¡»ï¼Œè‡ªåŠ¨æ‰§è¡Œï¼‰

**å‡è®¾ä»“åº“åœ¨æœ¬åœ°ï¼Œå‘½ä»¤å¯ä»¥æ‰§è¡Œã€‚**

### Step 0: ç¡®å®šå¯¹æ¯”åŸºå‡†

```bash
# è·å–å½“å‰åˆ†æ”¯
git rev-parse --abbrev-ref HEAD

# å°è¯• fetchï¼ˆå¦‚æœç½‘ç»œå…è®¸ï¼›å¤±è´¥åˆ™ç»§ç»­ï¼‰
git fetch --all --prune 2>/dev/null || echo "SKIP: fetch failed, using local refs"

# ç¡®å®š BASE ref
if git rev-parse --verify refs/remotes/origin/master >/dev/null 2>&1; then
  BASE="origin/master"
else
  BASE="master"
fi
echo "BASE=$BASE"
```

### Step 0.5: è·å–ä¸Šä¸‹æ–‡æ–‡æ¡£

**æ–‡æ¡£æ¥æº**ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼Œé«˜ä¼˜å…ˆçº§è¦†ç›–ä½ä¼˜å…ˆçº§ï¼‰ï¼š

1. **ç”¨æˆ·å¯¹è¯æŒ‡å®š**ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰ï¼šç”¨æˆ·é€šè¿‡ `@path/to/req-spec.md` æˆ–å¯¹è¯ä¸­æä¾›æ–‡ä»¶è·¯å¾„
2. **è‡ªåŠ¨æ¢æµ‹**ï¼šæœç´¢ `~/.claude/specs/` ä¸‹çš„æ–‡æ¡£
3. **æ— æ–‡æ¡£**ï¼šè·³è¿‡ï¼Œä»…åŸºäºä»£ç å®¡æŸ¥

**è‡ªåŠ¨æ¢æµ‹é€»è¾‘**ï¼ˆä»…åœ¨ç”¨æˆ·æœªæŒ‡å®šæ—¶æ‰§è¡Œï¼‰ï¼š

```bash
# æœç´¢ specs ç›®å½•
SPECS_DIR="$HOME/.claude/specs"
if [ -d "$SPECS_DIR" ]; then
  ls -d $SPECS_DIR/*/
  find $SPECS_DIR -name "req-spec.md" -type f 2>/dev/null
  find $SPECS_DIR -name "tech-spec.md" -type f 2>/dev/null
else
  echo "SKIP: ~/.claude/specs/ not found"
fi
```

**è‡ªåŠ¨æ¢æµ‹åŒ¹é…ç­–ç•¥**ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰ï¼š
1. å¦‚æœç”¨æˆ·åœ¨å¯¹è¯ä¸­æŒ‡å®šäº†éœ€æ±‚åç§° â†’ ç²¾ç¡®åŒ¹é… `~/.claude/specs/{éœ€æ±‚åç§°}/`
2. å¦‚æœå½“å‰åˆ†æ”¯ååŒ…å«éœ€æ±‚æ ‡è¯† â†’ æ¨¡ç³ŠåŒ¹é…ç›®å½•å
3. å¦‚æœä»…æ‰¾åˆ°ä¸€ä¸ª specs ç›®å½• â†’ ç›´æ¥ä½¿ç”¨
4. å¦‚æœæ‰¾åˆ°å¤šä¸ªæˆ–é›¶ä¸ª â†’ è·³è¿‡ï¼Œä»…åŸºäºä»£ç å®¡æŸ¥

**æ‰¾åˆ°æ–‡æ¡£å**ï¼ˆæ— è®ºæ¥æºæ˜¯ç”¨æˆ·æŒ‡å®šè¿˜æ˜¯è‡ªåŠ¨æ¢æµ‹ï¼‰ï¼š
- `req-spec.md` â†’ ç”¨äº PHASE 3 åçš„åŠŸèƒ½å®Œæ•´æ€§æ£€æŸ¥
- `tech-spec.md` â†’ ç”¨äº Role 2 æ¶æ„å®¡æŸ¥æ—¶ä½œä¸ºè®¾è®¡åŸºå‡†

è®°å½•æ¢æµ‹ç»“æœï¼š

```markdown
| æ–‡æ¡£ | çŠ¶æ€ | æ¥æº | è·¯å¾„ |
|------|------|------|------|
| req-spec.md | FOUND / NOT_FOUND | ç”¨æˆ·æŒ‡å®š / è‡ªåŠ¨æ¢æµ‹ / - | path |
| tech-spec.md | FOUND / NOT_FOUND | ç”¨æˆ·æŒ‡å®š / è‡ªåŠ¨æ¢æµ‹ / - | path |
```

### Step 1: Git è¯æ®

æŒ‰é¡ºåºæ‰§è¡Œï¼Œæ•è·è¾“å‡ºï¼š

```bash
# 1. å˜æ›´æ–‡ä»¶åˆ—è¡¨
git diff --name-only $BASE...HEAD

# 2. å˜æ›´ç»Ÿè®¡
git diff --stat $BASE...HEAD

# 3. è¯¦ç»† diffï¼ˆå¸¦ 5 è¡Œä¸Šä¸‹æ–‡ï¼‰
git diff -U5 $BASE...HEAD

# 4. æäº¤å†å²
git log --oneline $BASE...HEAD

# 5. æœ€è¿‘æäº¤ç»Ÿè®¡
git show --stat
```

### Step 1.5: è¯»å–å˜æ›´æ–‡ä»¶å…¨æ–‡

**ä»…çœ‹ diff ä¸å¤Ÿï¼Œå¿…é¡»è¯»å–å˜æ›´æ–‡ä»¶çš„å®Œæ•´å†…å®¹è·å–ä¸Šä¸‹æ–‡**ï¼š

- å¯¹ `git diff --name-only` è¾“å‡ºçš„æ¯ä¸ªæ–‡ä»¶ï¼Œä½¿ç”¨ Read å·¥å…·è¯»å–å…¨æ–‡
- é‡ç‚¹å…³æ³¨ï¼šå˜æ›´æ–¹æ³•çš„è°ƒç”¨æ–¹ï¼ˆä¸Šæ¸¸ï¼‰å’Œè¢«è°ƒç”¨æ–¹ï¼ˆä¸‹æ¸¸ï¼‰
- è¿™ä¸€æ­¥æ˜¯é—®é¢˜éªŒè¯ï¼ˆé˜²è¯¯æŠ¥ï¼‰çš„åŸºç¡€â€”â€”ä¸è¯»å…¨æ–‡å°±æ— æ³•åšä¸Šä¸‹æ¸¸åˆ†æ

### Step 2: Build & Test è¯æ®

```bash
# ç¼–è¯‘ + è¿è¡Œæµ‹è¯•
mvn -q test 2>&1

# å¦‚æœå¤±è´¥ï¼Œè®°å½•é”™è¯¯å¹¶ç»§ç»­ï¼ˆä¸é˜»å¡è¯„å®¡ï¼‰
```

### Step 3: Coverage è¯æ®

```bash
# è¿è¡Œ JaCoCo æŠ¥å‘Š
mvn -q test jacoco:report 2>&1

# æŸ¥æ‰¾æŠ¥å‘Šæ–‡ä»¶ï¼ˆä¼˜å…ˆ CSV ä¾¿äºè§£æï¼‰
find . -path "*/site/jacoco/jacoco.csv" -type f 2>/dev/null
find . -path "*/site/jacoco/index.html" -type f 2>/dev/null

# å¦‚æœ CSV å­˜åœ¨ï¼Œè§£æè¦†ç›–ç‡ï¼š
# - è¯»å– CSVï¼ŒæŒ‰ PACKAGE + CLASS æ±‡æ€» INSTRUCTION_MISSED / INSTRUCTION_COVERED
# - è®¡ç®—æ€»è¦†ç›–ç‡ = COVERED / (COVERED + MISSED) * 100
# - é‡ç‚¹å…³æ³¨å˜æ›´æ–‡ä»¶å¯¹åº”ç±»çš„è¦†ç›–ç‡
# å¦‚æœæŠ¥å‘Šä¸å­˜åœ¨æˆ–å‘½ä»¤å¤±è´¥ï¼šæ ‡è®° coverage ä¸º SKIP
# å°†ç¼ºå¤±è¦†ç›–ç‡è¯æ®ä½œä¸ºé£é™©è®°å½•åˆ° PHASE 5
```

### è¯æ®æ±‡æ€»æ ¼å¼

æ¯æ¡å‘½ä»¤è¾“å‡ºï¼š

```markdown
| # | Command | Status | Summary |
|---|---------|--------|---------|
| 1 | git diff --name-only | PASS | 12 files changed |
| 2 | git diff -U5 | PASS | +342/-89 lines |
| 3 | mvn test | PASS | 156 tests, 0 failures |
| 4 | jacoco:report | SKIP | JaCoCo plugin not configured |
```

### å‘½ä»¤å¤±è´¥å¤„ç†

å¦‚æœä»»ä½•å‘½ä»¤æ— æ³•æ‰§è¡Œï¼š
1. è®°å½•å¤±è´¥åŸå› ï¼ˆæƒé™ã€ç¼ºå°‘å·¥å…·ã€æ— ä»“åº“ç­‰ï¼‰
2. ç”¨å·²æœ‰è¯æ®ç»§ç»­è¯„å®¡
3. **ä»…åœ¨æ­¤æ—¶**æ‰è¦æ±‚ç”¨æˆ·æä¾›æœ€å°å¿…è¦ä¿¡æ¯ï¼ˆdiff æˆ–æµ‹è¯•è¾“å‡ºï¼‰

---

## PHASE 3: Multi-Role Reviewï¼ˆ4 è§’è‰²ï¼‰

### ä¸¥é‡ç¨‹åº¦å®šä¹‰

| çº§åˆ« | æ ‡è®° | è¯´æ˜ | å¤„ç†è¦æ±‚ |
|------|------|------|----------|
| **Blocker** | ğŸ”´ | å¿…é¡»ä¿®å¤æ‰èƒ½åˆå¹¶ | é˜»å¡åˆå¹¶ |
| **Major** | ğŸŸ  | å¼ºçƒˆå»ºè®®ä¿®å¤ | åˆå¹¶å‰ä¿®å¤ |
| **Minor** | ğŸŸ¡ | å»ºè®®æ”¹è¿› | å¯åç»­ä¿®å¤ |
| **Nit** | âšª | é£æ ¼/åå¥½ | å¯é€‰ |

### é€šç”¨è§„åˆ™

- æ¯æ¡å‘ç°**å¿…é¡»**å¼•ç”¨ diff æˆ–å‘½ä»¤è¾“å‡ºä¸­çš„è¯æ®ï¼ˆæ–‡ä»¶/ç±»/æ–¹æ³•/è¡Œå·ï¼‰
- æ¯æ¡ Major/Blocker **å¿…é¡»**åŒ…å«å¯æ‰§è¡Œä¿®å¤æ­¥éª¤å’ŒéªŒè¯æ­¥éª¤
- å‘ç°é—®é¢˜åéœ€è¿›è¡Œä¸Šä¸‹æ¸¸éªŒè¯ï¼Œå‡å°‘è¯¯æŠ¥

### é—®é¢˜éªŒè¯ï¼ˆé˜²è¯¯æŠ¥ï¼‰

**æ¯ä¸ªé—®é¢˜åœ¨çº³å…¥æŠ¥å‘Šå‰ï¼Œå¿…é¡»éªŒè¯**ï¼š

| éªŒè¯ç»´åº¦ | æ£€æŸ¥å†…å®¹ |
|----------|----------|
| **ä¸Šæ¸¸åˆ†æ** | è°ƒç”¨æ–¹æ˜¯å¦å·²å¤„ç†è¯¥åœºæ™¯ï¼Ÿ |
| **ä¸‹æ¸¸åˆ†æ** | è¢«è°ƒç”¨æ–¹æ˜¯å¦æœ‰ä¿éšœï¼Ÿ |
| **ä¸šåŠ¡åœºæ™¯** | è¯¥åœºæ™¯åœ¨ä¸šåŠ¡ä¸Šæ˜¯å¦å¯è¾¾ï¼Ÿ |
| **ä»£ç ä¸Šä¸‹æ–‡** | æ˜¯å¦æœ‰æ³¨é‡Š/é…ç½®è¯´æ˜æ˜¯æœ‰æ„è®¾è®¡ï¼Ÿ |

è¯¯æŠ¥é—®é¢˜æ ‡è®°ä¸ºã€Œå·²æ’é™¤ã€å¹¶è¯´æ˜åŸå› ï¼Œè®°å½•åˆ°æŠ¥å‘Šé™„å½•ã€‚

---

### Role 1: Correctness Reviewerï¼ˆæ­£ç¡®æ€§å®¡æŸ¥ï¼‰

**å…³æ³¨ç‚¹**ï¼š

- **äº‹åŠ¡æ­£ç¡®æ€§**ï¼š`@Transactional` æ­£ç¡®æ€§ã€rollback è§„åˆ™ã€propagation
- **MQ æ¶ˆè´¹å¹‚ç­‰**ï¼šmessageId/bizKey å»é‡ã€ack/commit æ—¶åº
- **ç¼“å­˜ä¸€è‡´æ€§**ï¼šDB write + cache invalidate æ¨¡å¼ã€TTL è®¾ç½®
- **å¹¶å‘ä¸é”**ï¼šä¹è§‚é”/versionã€åˆ†å¸ƒå¼é”æ­£ç¡®æ€§
  - å…ˆæŸ¥åæ”¹æ˜¯å¦æœ‰ç«æ€æ¡ä»¶
  - CAS æ“ä½œæ˜¯å¦æœ‰ ABA é—®é¢˜
  - é”è¶…æ—¶/é”ç»­æœŸ/é”é‡Šæ”¾
- **æŸ¥è¯¢æ­£ç¡®æ€§**ï¼šN+1 é—®é¢˜ã€åˆ†é¡µç¨³å®šæ€§
- **å¼‚å¸¸å¤„ç†ä¸é‡è¯•å®‰å…¨**ï¼šå¹‚ç­‰æ„ŸçŸ¥çš„é‡è¯•
- **çŠ¶æ€æœºå®Œæ•´æ€§**ï¼ˆå¦‚æ¶‰åŠï¼‰ï¼š
  - çŠ¶æ€æµè½¬æ˜¯å¦å®Œæ•´è¦†ç›–æ‰€æœ‰ä¸šåŠ¡åœºæ™¯
  - æ˜¯å¦å­˜åœ¨å­¤ç«‹çŠ¶æ€æ— æ³•æµè½¬åˆ°ç»ˆæ€
  - å¼‚å¸¸ä¸­æ–­åèƒ½å¦æ¢å¤ç»§ç»­å¤„ç†
  - æœ€ç»ˆä¸€è‡´æ€§ä¿éšœï¼ˆTCC/Saga/æ¶ˆæ¯äº‹åŠ¡ï¼‰

**å…¸å‹é—®é¢˜ç¤ºä¾‹**ï¼š

```java
// âŒ é”™è¯¯ï¼šå…ˆæŸ¥åæ”¹ï¼Œå­˜åœ¨å¹¶å‘é—®é¢˜
int balance = getBalance(userId);
if (balance >= amount) {
    updateBalance(userId, balance - amount);  // å¹¶å‘æ—¶å¯èƒ½è¶…æ‰£
}

// âœ… æ­£ç¡®ï¼šåŸå­æ“ä½œ
int affected = updateBalanceWithCheck(userId, amount);
// UPDATE balance SET amount = amount - ? WHERE user_id = ? AND amount >= ?
if (affected == 0) {
    throw new InsufficientBalanceException();
}
```

---

### Role 2: Architecture Reviewerï¼ˆæ¶æ„å®¡æŸ¥ï¼‰

**å…³æ³¨ç‚¹**ï¼š

- åˆ†å±‚è¿è§„ã€è€¦åˆã€è¾¹ç•Œé—®é¢˜
- Config/timeouts/retries æ˜¯å¦å¤–éƒ¨åŒ–
- ä¾èµ–å€’ç½®ä¸å¯æµ‹æ€§
- å…¼å®¹æ€§ï¼šDTO/schema/åºåˆ—åŒ–æ¼”è¿›
- æ˜¯å¦ç¬¦åˆç°æœ‰æ¶æ„åˆ†å±‚
- æ˜¯å¦æœ‰å¾ªç¯ä¾èµ–
- æ–°å¢æ¥å£æ˜¯å¦æœ‰ç»Ÿä¸€å°è£…

**tech-spec.md åŸºå‡†å¯¹æ¯”**ï¼ˆå¦‚ Step 0.5 æ¢æµ‹åˆ°æŠ€æœ¯æ–¹æ¡ˆï¼‰ï¼š
- å®ç°æ˜¯å¦ä¸æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡ä¸€è‡´
- æ˜¯å¦åç¦»äº†æ–¹æ¡ˆä¸­çš„æ¶æ„åˆ†å±‚/æ¨¡å—è¾¹ç•Œ
- æ–¹æ¡ˆä¸­çš„å…³é”®è®¾è®¡å†³ç­–æ˜¯å¦è¢«æ­£ç¡®è½åœ°

**DB è¡¨ç»“æ„å…¼å®¹æ€§**ï¼ˆå¦‚æ¶‰åŠ DDLï¼‰ï¼š

| æ“ä½œ | å…¼å®¹æ€§ | æ³¨æ„äº‹é¡¹ |
|------|--------|----------|
| æ–°å¢å­—æ®µ | âœ… | å¿…é¡»æœ‰é»˜è®¤å€¼æˆ–å…è®¸ NULL |
| åˆ é™¤å­—æ®µ | âš ï¸ | å…ˆåœæ­¢ä½¿ç”¨ï¼Œå†åˆ é™¤ |
| ä¿®æ”¹å­—æ®µç±»å‹ | âŒ | æ–°å¢å­—æ®µ + æ•°æ®è¿ç§» |
| æ–°å¢ç´¢å¼• | âœ… | æ³¨æ„é”è¡¨æ—¶é—´ |

**å…¼å®¹æ€§å‘å¸ƒé¡ºåº**ï¼š

```
æ¨èå‘å¸ƒé¡ºåºï¼š
1. æ–°å¢å­—æ®µ/ç´¢å¼•ï¼šå…ˆ DDLï¼Œåä»£ç 
2. åˆ é™¤å­—æ®µ/ç´¢å¼•ï¼šå…ˆä»£ç ï¼ˆåœæ­¢ä½¿ç”¨ï¼‰ï¼Œå DDL
3. å­—æ®µç±»å‹å˜æ›´ï¼šè¯„ä¼°å…¼å®¹æ€§ï¼Œå¿…è¦æ—¶åˆ†æ­¥å‘å¸ƒ
```

**SQL å˜æ›´æ¸…å•è¾“å‡º**ï¼š

```markdown
| SQL ç±»å‹ | è¡¨å | æ¡ä»¶å­—æ®µ | å»ºè®®ç´¢å¼• |
|----------|------|----------|----------|
| SELECT | t_credit_record | user_id, status | idx_user_status |
| UPDATE | t_order | order_no | uk_order_no |
```

---

### Role 3: Security Reviewerï¼ˆå®‰å…¨å®¡æŸ¥ï¼‰

**å…³æ³¨ç‚¹**ï¼š

- SQL æ³¨å…¥ã€ä¸å®‰å…¨å­—ç¬¦ä¸²æ‹¼æ¥
- æ•æ„Ÿä¿¡æ¯æ—¥å¿—ï¼ˆPII/tokensï¼‰ã€å¯†é’¥æ³„éœ²
- ååºåˆ—åŒ–é£é™©
- Redis key éš”ç¦»æ€§/å¯çŒœæµ‹æ€§
- è¾“å…¥æ ¡éªŒå’Œé‰´æƒï¼ˆå¦‚æ¶‰åŠæ¥å£å˜æ›´ï¼‰
- è¶Šæƒè®¿é—®é£é™©

**SQL æ³¨å…¥æ‰«æ**ï¼š

```bash
# æ£€æŸ¥ MyBatis XML ä¸­çš„ ${} æ‹¼æ¥ï¼ˆé«˜é£é™©ï¼‰
git diff $BASE...HEAD -- "*.xml" | grep -n '\${' || echo "æ—  \${} æ‹¼æ¥"

# æ£€æŸ¥ Java ä»£ç ä¸­çš„å­—ç¬¦ä¸²æ‹¼æ¥ SQL
git diff $BASE...HEAD -- "*.java" | grep -n 'concat\|StringBuilder.*sql\|"SELECT.*+\|"UPDATE.*+\|"DELETE.*+' -i || echo "æ— å­—ç¬¦ä¸²æ‹¼æ¥ SQL"
```

**æ•æ„Ÿä¿¡æ¯æ—¥å¿—æ‰«æ**ï¼š

```bash
# æ£€æŸ¥æ—¥å¿—ä¸­çš„æ•æ„Ÿä¿¡æ¯
git diff $BASE...HEAD -- "*.java" | grep -n 'log\..*password\|log\..*token\|log\..*secret\|log\..*idCard\|log\..*phone\|log\..*bankCard' -i || echo "æ— æ•æ„Ÿä¿¡æ¯æ—¥å¿—"
```

---

### Role 4: SRE/Reliability Reviewerï¼ˆå¯é æ€§å®¡æŸ¥ï¼‰

**å…³æ³¨ç‚¹**ï¼š

- DB/Redis/MQ/HTTP çš„è¶…æ—¶è®¾ç½®
- é‡è¯•/é€€é¿ç­–ç•¥ã€DLQ ç­–ç•¥ã€æ¯’æ¶ˆæ¯å¤„ç†
- èµ„æºæ± ã€èƒŒå‹æœºåˆ¶
- å¯è§‚æµ‹æ€§ï¼štraceId/bizKey/messageIdã€metrics
- åŸ‹ç‚¹å®Œæ•´æ€§ï¼ˆå…¥å£/å†³ç­–/å¼‚å¸¸ä¸‰ç±»åŸ‹ç‚¹ï¼‰
- æ”¾é‡è®¾è®¡ï¼ˆç°åº¦å¼€å…³ã€é…ç½®é»˜è®¤å€¼ï¼‰

**æ‰¹è·‘/ä½œä¸šç³»ç»Ÿä¸“é¡¹æ£€æŸ¥**ï¼ˆå¦‚æ¶‰åŠ Scheduler/Job/Batchï¼‰ï¼š
- [ ] è°ƒç”¨ä¸‹æ¸¸æ˜¯å¦æœ‰é™æµï¼ˆRateLimiterã€ä¿¡å·é‡ï¼‰
- [ ] æ‰¹é‡å¤„ç†æ˜¯å¦åˆ†é¡µ/åˆ†æ‰¹ï¼ˆæ¯æ‰¹ â‰¤500ï¼‰
- [ ] æ˜¯å¦æœ‰è¿›åº¦è®°å½•ï¼ˆæ”¯æŒæ–­ç‚¹ç»­è·‘ï¼‰
- [ ] æ˜¯å¦è€ƒè™‘æ•°æ®å€¾æ–œ
- [ ] æ˜¯å¦æœ‰å¤„ç†è€—æ—¶ç›‘æ§

**åŸ‹ç‚¹æ£€æŸ¥**ï¼š

```bash
# åœ¨å˜æ›´æ–‡ä»¶ä¸­æœç´¢åŸ‹ç‚¹æ–¹æ³•
git diff $BASE...HEAD --name-only | xargs grep -l "sumReport\|counterReport\|averageReport\|errorReport" 2>/dev/null || echo "æ— åŸ‹ç‚¹"
```

- [ ] æ ¸å¿ƒä¸šåŠ¡å…¥å£æ˜¯å¦æœ‰ sumReport/counterReport
- [ ] å…³é”®åˆ†æ”¯å†³ç­–ç‚¹æ˜¯å¦æœ‰ counterReport
- [ ] å¼‚å¸¸å¤„ç†æ˜¯å¦æœ‰ errorReport
- [ ] åŸ‹ç‚¹å‘½åè§„èŒƒï¼š`{ç³»ç»Ÿ}.{æ¨¡å—}.{æ“ä½œ}.{ç»“æœ}`

**æ”¾é‡è®¾è®¡æ£€æŸ¥**ï¼š

```bash
# æœç´¢é…ç½®ä¸­å¿ƒ/ç°åº¦ç›¸å…³ä»£ç 
git diff $BASE...HEAD | grep -E "hippo|config|switch|gray|ç°åº¦|æ”¾é‡" -i
```

- [ ] æ–°å¢é…ç½®é¡¹æ˜¯å¦æœ‰é»˜è®¤å€¼
- [ ] é»˜è®¤å€¼èµ°å“ªæ¡æµç¨‹ï¼ˆæ–°æµç¨‹/æ—§æµç¨‹ï¼‰
- [ ] æ˜¯å¦æ”¯æŒç°åº¦æ”¾é‡ï¼ˆç™¾åˆ†æ¯”/ç™½åå•ï¼‰

è¾“å‡ºé…ç½®æ¸…å•ï¼š

```markdown
| é…ç½® Key | é»˜è®¤å€¼ | è¯´æ˜ | æ”¾é‡ç­–ç•¥ |
|----------|--------|------|----------|
| credit.new.flow.enable | false | æ–°æµç¨‹å¼€å…³ | æŒ‰æ¯”ä¾‹æ”¾é‡ |
```

---

### æ¯è§’è‰²è¾“å‡ºæ ¼å¼

**Blocker/Major**ï¼ˆå¿…é¡»åŒ…å« Fix + Verificationï¼‰ï¼š

```markdown
#### [Severity] Finding Title
- **Evidence**: `ClassName.java:123` â€” [å¼•ç”¨ diff ä¸­çš„ç›¸å…³ä»£ç ç‰‡æ®µ]
- **Problem**: [é—®é¢˜æè¿°]
- **Fix (Executable steps)**:
  1. [å…·ä½“æ­¥éª¤ 1]
  2. [å…·ä½“æ­¥éª¤ 2]
- **Verification**:
  - [è¿è¡Œä»€ä¹ˆå‘½ä»¤]
  - [æ£€æŸ¥ä»€ä¹ˆç»“æœ]
```

**Minor/Nit**ï¼ˆä»…éœ€ Evidence + Problemï¼‰ï¼š

```markdown
#### [Severity] Finding Title
- **Evidence**: `ClassName.java:123` â€” [å¼•ç”¨ diff ä¸­çš„ç›¸å…³ä»£ç ç‰‡æ®µ]
- **Problem**: [é—®é¢˜æè¿°]
- **Suggestion**: [æ”¹è¿›å»ºè®®ï¼Œä¸€å¥è¯]
```

---

## PHASE 4: Problem Verificationï¼ˆé—®é¢˜éªŒè¯ï¼Œé˜²è¯¯æŠ¥ï¼‰

**å¯¹ PHASE 3 äº§å‡ºçš„æ¯ä¸ªé—®é¢˜è¿›è¡Œä¸Šä¸‹æ¸¸åˆ†æï¼Œç¡®è®¤é—®é¢˜çœŸå®å­˜åœ¨åæ‰çº³å…¥æœ€ç»ˆæŠ¥å‘Šã€‚**

### éªŒè¯æ£€æŸ¥æ¸…å•

æ¯ä¸ªé—®é¢˜éœ€éªŒè¯ï¼š

| éªŒè¯ç»´åº¦ | æ£€æŸ¥å†…å®¹ |
|----------|----------|
| **ä¸Šæ¸¸åˆ†æ** | è°ƒç”¨æ–¹æ˜¯å¦å·²å¤„ç†è¯¥åœºæ™¯ï¼Ÿï¼ˆå¦‚ï¼šä¸Šæ¸¸å·²æ ¡éªŒå‚æ•°ï¼Œä¸‹æ¸¸æ— éœ€é‡å¤æ ¡éªŒï¼‰ |
| **ä¸‹æ¸¸åˆ†æ** | è¢«è°ƒç”¨æ–¹æ˜¯å¦æœ‰ä¿éšœï¼Ÿï¼ˆå¦‚ï¼šæ¡†æ¶å·²ä¿è¯éç©ºï¼Œæ— éœ€ null æ£€æŸ¥ï¼‰ |
| **ä¸šåŠ¡åœºæ™¯** | è¯¥åœºæ™¯åœ¨ä¸šåŠ¡ä¸Šæ˜¯å¦çœŸå®å¯è¾¾ï¼Ÿ |
| **ä»£ç ä¸Šä¸‹æ–‡** | æ˜¯å¦æœ‰æ³¨é‡Šã€é…ç½®è¯´æ˜è¯¥è®¾è®¡æ˜¯æœ‰æ„ä¸ºä¹‹ï¼Ÿ |

### éªŒè¯æµç¨‹

1. æ”¶é›† PHASE 3 æ‰€æœ‰é—®é¢˜ï¼ˆè‰ç¨¿çŠ¶æ€ï¼‰
2. å¯¹æ¯ä¸ªé—®é¢˜è¯»å–ç›¸å…³æ–‡ä»¶çš„ä¸Šä¸‹æ¸¸è°ƒç”¨é“¾
3. éªŒè¯é€šè¿‡ â†’ çº³å…¥æœ€ç»ˆæŠ¥å‘Š
4. éªŒè¯ä¸é€šè¿‡ï¼ˆè¯¯æŠ¥ï¼‰â†’ æ ‡è®°ä¸ºã€Œå·²æ’é™¤ã€å¹¶è¯´æ˜åŸå› 
5. å·²æ’é™¤é—®é¢˜é™„åœ¨æŠ¥å‘Šæœ«å°¾çš„ã€ŒExcluded Issuesã€ç« èŠ‚

---

## PHASE 5: Consolidationï¼ˆå»é‡ + Top 10ï¼‰

1. è·¨è§’è‰²å»é‡ï¼ˆåŒä¸€é—®é¢˜å¯èƒ½è¢«å¤šä¸ªè§’è‰²å‘ç°ï¼‰
2. ä»…ä¿ç•™ **Top 10** é—®é¢˜ï¼ŒæŒ‰ä¸¥é‡ç¨‹åº¦æ’åº
3. è¾“å‡ºæ±‡æ€»è¡¨ï¼š

```markdown
| # | Severity | Area | File | Summary | Executable Fix |
|---|----------|------|------|---------|----------------|
| 1 | ğŸ”´ Blocker | Concurrency | OrderService.java:89 | Race condition in balance deduction | Use atomic UPDATE with WHERE check |
| 2 | ğŸŸ  Major | MQ | ConsumerHandler.java:45 | Missing idempotency on message consume | Add messageId dedup via Redis SETNX |
| ... | | | | | |
```

**Area åˆ†ç±»**ï¼šDB / Redis / MQ / Test / Config / Concurrency / Security / Architecture / Reliability / Other

**åˆ†ç±»**ï¼š
- **MUST FIX before merge**: Blocker + Major
- **CAN DEFER**: Minor + Nit

---

## PHASE 6: Patch & Execution Plan

### å¯¹æ¯ä¸ª Blocker/Major æä¾›

1. **ç²¾ç¡®ä½ç½®**ï¼šæ–‡ä»¶/ç±»/æ–¹æ³•
2. **åˆ†æ­¥ä¿®å¤è®¡åˆ’**ï¼šstep-by-step
3. **ä»£ç ç‰‡æ®µ**ï¼špatch-style diff æˆ–ä»£ç ç¤ºä¾‹
4. **éªŒè¯æ–¹å¼**ï¼šå…·ä½“å‘½ä»¤ + æ£€æŸ¥å†…å®¹

**ç¤ºä¾‹**ï¼ˆæ¯ä¸ª Fix æŒ‰æ­¤æ ¼å¼è¾“å‡ºï¼‰ï¼š

    ### Fix #1: [Finding Title]

    **File**: `src/main/java/com/example/OrderService.java`
    **Method**: `deductBalance()`

    **Steps**:
    1. Replace read-then-write pattern with atomic UPDATE
    2. Add optimistic lock version check

    **Patch**:
    ```diff
    - int balance = getBalance(userId);
    - if (balance >= amount) {
    -     updateBalance(userId, balance - amount);
    - }
    + int affected = orderDao.deductWithCheck(userId, amount);
    + if (affected == 0) {
    +     throw new InsufficientBalanceException();
    + }
    ```

    **Verify**: `mvn test -Dtest=OrderServiceTest -pl order-module`

### Coverage Policyï¼ˆ80% é˜ˆå€¼ï¼‰

**JaCoCo è¦†ç›–ç‡å¯ç”¨æ—¶**ï¼š
- è¦†ç›–ç‡ < 80%ï¼šæ ‡è®°ä¸º Majorï¼ˆå…³é”®è·¯å¾„åˆ™ Blockerï¼‰
- å…·ä½“æŒ‡å‡ºå˜æ›´ç±»/æ–¹æ³•ä¸­ç¼ºå°‘æµ‹è¯•çš„éƒ¨åˆ†
- æä¾›å…·ä½“æµ‹è¯•ç”¨ä¾‹å»ºè®®

**JaCoCo ä¸å¯ç”¨æ—¶**ï¼š
- æ–°å¢/ä¿®æ”¹çš„ç”Ÿäº§é€»è¾‘ç¼ºå°‘æµ‹è¯•ï¼šæ ‡è®°ä¸º Major
- æä¾›å…·ä½“æµ‹è¯•ç”¨ä¾‹å»ºè®®
- æä¾› JaCoCo Maven æ’ä»¶é…ç½®ç‰‡æ®µï¼š

```xml
<plugin>
  <groupId>org.jacoco</groupId>
  <artifactId>jacoco-maven-plugin</artifactId>
  <version>0.8.11</version>
  <executions>
    <execution>
      <goals><goal>prepare-agent</goal></goals>
    </execution>
    <execution>
      <id>report</id>
      <phase>test</phase>
      <goals><goal>report</goal></goals>
    </execution>
  </executions>
</plugin>
```

---

## PHASE 7: Final Report

**è¾“å‡ºå•ä¸€ Markdown æ–‡æ¡£ã€‚**

**æ–‡ä»¶åæ ¼å¼**ï¼š

```
Review-<current-branch>-<YYYYMMDD>-java-db-redis-mq.md
```

**è¾“å‡ºè·¯å¾„**ï¼ˆæ ¹æ®ä¸Šä¸‹æ–‡é€‰æ‹©ï¼‰ï¼š
- å¦‚æœåœ¨ `~/.claude/specs/{éœ€æ±‚åç§°}/` å·¥ä½œæµä¸­ï¼š`~/.claude/specs/{éœ€æ±‚åç§°}/ä»£ç å¼€å‘/review/Review-xxx.md`
- å¦åˆ™ï¼šå½“å‰é¡¹ç›®æ ¹ç›®å½•ä¸‹ `Review-xxx.md`

**æŠ¥å‘Šç»“æ„**ï¼ˆå‚è€ƒ report-template.mdï¼‰ï¼š

```markdown
# Executive Summary
[ä¸€æ®µè¯æ€»ç»“ï¼šå˜æ›´èŒƒå›´ã€é£é™©ç­‰çº§ã€å…³é”®å‘ç°æ•°é‡]

# Evidence Summary
[PHASE 2 çš„è¯æ®æ±‡æ€»è¡¨]

# Scope & Risk
[PHASE 1 çš„ Scope & Risk Summary]

# Top Findings (Deduped, Top 10)
[PHASE 4 çš„å»é‡æ±‡æ€»è¡¨ï¼Œåˆ†ä¸º MUST FIX / CAN DEFER]

# Detailed Notes by Role
## Correctness Reviewer
[Role 1 çš„è¯¦ç»†å‘ç°]
## Architecture Reviewer
[Role 2 çš„è¯¦ç»†å‘ç°]
## Security Reviewer
[Role 3 çš„è¯¦ç»†å‘ç°]
## SRE / Reliability Reviewer
[Role 4 çš„è¯¦ç»†ï¿½ï¿½ç°]

# Patch & Action Plan
[PHASE 5 çš„ä¿®å¤æ–¹æ¡ˆï¼Œæ¯ä¸ª Blocker/Major ä¸€ä¸ªå­ç« èŠ‚]

# Test & Coverage Review
[è¦†ç›–ç‡æ•°æ® + ç¼ºå¤±æµ‹è¯•å»ºè®® + JaCoCo é…ç½®ï¼ˆå¦‚éœ€ï¼‰]

# Release Checklist
- [ ] All Blocker issues resolved
- [ ] All Major issues resolved or explicitly accepted
- [ ] Tests pass (mvn test)
- [ ] Coverage >= 80% (or risk accepted)
- [ ] DB DDL executed in correct order
- [ ] Config defaults verified (feature flags OFF)
- [ ] Rollback plan documented
- [ ] Monitoring/alerting configured

# Appendix
## Excluded Issues (False Positives)
[å·²æ’é™¤çš„è¯¯æŠ¥é—®é¢˜åŠåŸå› ]
## SQL Change List
[SQL å˜æ›´æ¸…å•]
## Config Change List
[é…ç½®å˜æ›´æ¸…å•]
```

---

## å…¨å±€è§„åˆ™

1. **ä¼˜å…ˆè‡ªåŠ¨é‡‡é›†è¯æ®**ï¼Œä¸è¦æ±‚ç”¨æˆ·ç²˜è´´
2. **Major/Blocker å¿…é¡»æä¾›å¯æ‰§è¡Œä¿®å¤æ–¹æ¡ˆ**ï¼Œä¸ç»™æ¨¡ç³Šå»ºè®®
3. **æœ€ç»ˆæ±‡æ€»æœ€å¤š 10 æ¡**ï¼Œå»é‡æ’åº
4. **è¾“å‡ºå¹²å‡€çš„å¯å¤åˆ¶ç²˜è´´ Markdown**
5. **é—®é¢˜å¿…é¡»å¼•ç”¨è¯æ®**ï¼ˆæ–‡ä»¶/è¡Œå·/diff ç‰‡æ®µï¼‰
6. **é—®é¢˜éªŒè¯é˜²è¯¯æŠ¥**ï¼šä¸Šä¸‹æ¸¸åˆ†æåæ‰çº³å…¥æŠ¥å‘Š
7. **åªå®¡æŸ¥å˜æ›´ä»£ç **ï¼šä¸å®¡æŸ¥æœªå˜æ›´çš„ä»£ç ï¼Œä½†éœ€è¯»å–ä¸Šä¸‹æ–‡ç†è§£å½±å“

---

## è‡ªåŠ¨ï¼šåŠŸèƒ½å®Œæ•´æ€§æ£€æŸ¥

**å¦‚æœ Step 0.5 æ¢æµ‹åˆ° req-spec.md**ï¼Œè‡ªåŠ¨æ‰§è¡ŒåŠŸèƒ½è¦†ç›–åº¦å¯¹æ¯”ï¼ˆæ— éœ€ç”¨æˆ·æ‰‹åŠ¨æä¾›ï¼‰ï¼š

```markdown
| éœ€æ±‚åŠŸèƒ½ç‚¹ | å®ç°çŠ¶æ€ | ç›¸å…³æ–‡ä»¶ |
|------------|----------|----------|
| ç”¨æˆ·æˆä¿¡é¢åº¦è®¡ç®— | âœ… å·²å®ç° | CreditService.java |
| æˆä¿¡ç»“æœé€šçŸ¥ | âš ï¸ éƒ¨åˆ†å®ç° | NotifyService.javaï¼ˆç¼ºå¤±å¤±è´¥é€šçŸ¥ï¼‰|
| é¢åº¦å†»ç»“åŠŸèƒ½ | âŒ æœªå®ç° | - |
```

å¦‚æœ Step 0.5 æœªæ¢æµ‹åˆ° req-spec.mdï¼Œè·³è¿‡æ­¤æ­¥éª¤ã€‚ç”¨æˆ·ä¹Ÿå¯åœ¨å¯¹è¯ä¸­ä¸»åŠ¨æä¾›éœ€æ±‚æ–‡æ¡£è·¯å¾„æˆ– TAPD é“¾æ¥æ¥è§¦å‘ã€‚

---

## ä¸å…¶ä»– Skill çš„å…³ç³»

| Skill | å…³ç³» |
|-------|------|
| **requirement-clarifier** | req-spec.md è‡ªåŠ¨æ¢æµ‹ï¼Œç”¨äºåŠŸèƒ½å®Œæ•´æ€§æ£€æŸ¥ |
| **spec-generator** | tech-spec.md è‡ªåŠ¨æ¢æµ‹ï¼Œç”¨äºæ¶æ„å®¡æŸ¥åŸºå‡†å¯¹æ¯” |
| **tech-review** | æ–¹æ¡ˆè¯„å®¡åœ¨å‰ï¼Œä»£ç è¯„å®¡åœ¨å |
| **test-verify** | æµ‹è¯•éªŒè¯åœ¨å‰ï¼Œä»£ç è¯„å®¡åœ¨åï¼›test-report å¯ä½œä¸ºè¯„å®¡å‚è€ƒ |
| **code-dev** | å¼€å‘å®Œæˆåç»æµ‹è¯•éªŒè¯å†è°ƒç”¨ä»£ç è¯„å®¡ |

---

## ç”¨æˆ·æŒ‡ä»¤

| æŒ‡ä»¤ | è¯´æ˜ |
|------|------|
| `/cr-stop` | ç»ˆæ­¢è¯„å®¡ |
| `/cr-status` | æŸ¥çœ‹å½“å‰è¯„å®¡è¿›åº¦ |
| `/cr-rerun <phase>` | é‡æ–°æ‰§è¡ŒæŒ‡å®šé˜¶æ®µ |
